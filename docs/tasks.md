# MacDisplayLink 작업 목록

이 문서는 `docs/development-guide.md`를 기준으로 한 실행 가능한 Task 목록입니다.

---

## 진행 상황 추적

| Phase | 상태 | 진행률 | 비고 |
|-------|------|--------|------|
| Phase 1 | 🔴 대기 | 0% | |
| Phase 2 | 🔴 대기 | 0% | |
| Phase 3 | 🔴 대기 | 0% | |
| Phase 4 | 🔴 대기 | 0% | |

상태 범례:
- 🔴 대기
- 🟡 진행중
- 🟢 완료
- ⚪ 보류

---

## Phase 1: MVP

### 1) 캡쳐 카드 인식
- [ ] `AVCaptureDevice`로 비디오 캡쳐 디바이스 열거
- [ ] 내장 카메라 제외 로직 추가
- [ ] 외부 캡쳐 카드만 목록 표시
- [ ] 디바이스 연결/해제 이벤트 감지

### 2) 비디오 입력 및 프리뷰
- [ ] `AVCaptureSession` 구성
- [ ] 비디오 입력 스트림 수신
- [ ] 프리뷰 출력(`AVCaptureVideoPreviewLayer` 또는 SwiftUI 래핑)
- [ ] 신호 없음 상태 UI 표시
- [ ] 입력 신호 정보 표시(해상도/프레임레이트)

### 3) 오디오 입력 및 모니터링
- [ ] 오디오 입력 스트림 수신
- [ ] 스피커 모니터링 출력
- [ ] 기본 볼륨 조절
- [ ] 오디오 레벨 미터 표시(기본)

### 4) 기본 녹화
- [ ] `AVAssetWriter`로 녹화 파이프라인 구성
- [ ] 녹화 시작/정지 기능
- [ ] 기본 저장 포맷(MOV 또는 MP4) 고정
- [ ] 파일 저장 경로 지정(기본 경로)
- [ ] 자동 파일명 생성(날짜/시간)
- [ ] 녹화 상태 표시(시간, 파일 크기)

---

## Phase 2: 설정 및 제어

### 1) 해상도/프레임레이트 설정
- [ ] 지원 가능한 해상도/프레임레이트 목록 표시
- [ ] 선택 UI 추가
- [ ] 세션 재설정 로직

### 2) 저장 포맷 및 코덱
- [ ] 포맷 선택 UI(MP4, MOV)
- [ ] 코덱 선택 UI(H.264, H.265)
- [ ] 비트레이트 설정

### 3) 오디오 제어
- [ ] 볼륨 슬라이더 개선
- [ ] 오디오 레벨 미터 고도화(피크/평균)

### 4) 저장 경로 및 단축키
- [ ] 저장 경로 설정 UI
- [ ] 사용자 선택 경로 저장
- [ ] 녹화 시작/정지 단축키

---

## Phase 3: 편의 기능

- [ ] 스크린샷 기능
- [ ] 저장 공간 확인 및 경고
- [ ] 최근 녹화 파일 목록
- [ ] 다중 디바이스 지원

---

## Phase 4: 고급 기능

- [ ] 오디오 입력 소스 믹싱
- [ ] 화면 회전/반전 옵션
- [ ] 타임스탬프/워터마크 오버레이
- [ ] 프리뷰 품질 설정

---

## 에러 처리 및 권한

### 에러 처리
- [ ] 캡쳐 카드 연결 해제 감지 및 처리
- [ ] 신호 끊김 감지(녹화 중)
- [ ] 디스크 공간 부족 경고 및 자동 정지
- [ ] 권한 요청 실패 처리(카메라, 마이크, 파일 접근)
- [ ] 지원하지 않는 해상도/프레임레이트 처리

### 권한
- [ ] `NSCameraUsageDescription` 추가
- [ ] `NSMicrophoneUsageDescription` 추가

---

## UI/UX 작업

### 메인 화면
- [ ] 비디오 프리뷰 영역 배치
- [ ] 녹화 시작/정지 버튼
- [ ] 녹화 시간 표시
- [ ] 오디오 볼륨 슬라이더
- [ ] 오디오 레벨 미터
- [ ] 디바이스 연결 상태 표시
- [ ] 입력 신호 정보 표시
- [ ] 녹화 진행 상태 표시
- [ ] 저장 공간 정보 표시

### 설정 화면
- [ ] 캡쳐 디바이스 선택 UI
- [ ] 출력 해상도/프레임레이트 설정
- [ ] 저장 포맷 및 코덱 선택
- [ ] 비트레이트 설정
- [ ] 저장 경로 설정

---

## 개발 체크리스트

### 시작하기 전
- [ ] Xcode 프로젝트 설정 확인
- [ ] AVFoundation 프레임워크 추가
- [ ] Info.plist 권한 설정
- [ ] 캡쳐 카드 연결 테스트

### 개발 중
- [ ] 커밋 시 `docs/commit-guide.md` 준수
- [ ] 기능 브랜치 사용(`docs/branch-guide.md` 참고)
- [ ] 기능 완료 시 테스트 수행

### 배포 전
- [ ] 에러 처리 확인
- [ ] 메모리 누수 체크
- [ ] 다양한 캡쳐 카드 테스트
- [ ] 다양한 해상도/프레임레이트 테스트
